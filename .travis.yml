language: python
python:
- '2.7'
addons:
  postgresql: '9.3'
install:
- pip install -r requirements/development.txt
before_script:
- psql -c 'CREATE DATABASE yebimom;' -U postgres
script:
- npm install -g bower grunt-cli
- npm install
- gem install sass
- grunt bowercopy sass
- python manage.py collectstatic --noinput --ignore '*.sass'
- pep8
- python manage.py makemigrations users centers events reviews
- python manage.py migrate
- python manage.py loaddata regions facilities
- python manage.py test -v2
deploy:
  provider: heroku
  app: yebimom-dev
  api_key:
    secure: WhLNAsel8gqwIIbOTBb9yU+6c5PL2zqDIPWtJRvWxCJa14g4ijezvz08yfTeNo+vfXzNooBGmUtvqpjYgwNLrJKHa8+YPBp/HBdnw3bhcUnzvtZVN4za5imI39ly10gkt8YCvpMDx5R6YhChecRaIWZGjwvdVlsfJCEDIvgLxIY=      
  on: develop
notifications:
  slack: molang:iOlv6ne427evuLd1S02CiLFD
  email:
    on_success: never
    on_failure: always
